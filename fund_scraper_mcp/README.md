# Fund Scraper MCP Server

ä¸€ä¸ªåŸºäº MCP (Model Context Protocol) çš„åŸºé‡‘æ•°æ®çˆ¬å–æœåŠ¡ï¼Œé€šè¿‡æµè§ˆå™¨è‡ªåŠ¨åŒ–æŠ€æœ¯ä»å¤©å¤©åŸºé‡‘ç½‘è·å–ä¸­å›½å…¬å‹ŸåŸºé‡‘æ•°æ®ã€‚

## è¿™æ˜¯ä»€ä¹ˆï¼Ÿ

**MCP (Model Context Protocol)** æ˜¯ Anthropic å¼€å‘çš„å¼€æ”¾åè®®ï¼Œè®© AI åŠ©æ‰‹ï¼ˆå¦‚ GitHub Copilotã€Claudeï¼‰èƒ½å¤Ÿè°ƒç”¨å¤–éƒ¨å·¥å…·å’ŒæœåŠ¡ã€‚

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ª **MCP Server**ï¼Œæä¾›ä»¥ä¸‹èƒ½åŠ›ï¼š
- ğŸ” è·å–ä¸­å›½å…¨éƒ¨ **26000+ åªå…¬å‹ŸåŸºé‡‘** çš„ä»£ç å’ŒåŸºæœ¬ä¿¡æ¯
- ğŸ“Š è·å–åŸºé‡‘å‡€å€¼ã€å¢é•¿ç‡ã€æ’è¡Œæ¦œæ•°æ®
- ğŸ“ˆ è·å–åŸºé‡‘è¯¦æƒ…ï¼ˆåŸºé‡‘ç»ç†ã€è§„æ¨¡ã€ç±»å‹ç­‰ï¼‰
- ğŸ“‰ è·å–åŸºé‡‘å†å²å‡€å€¼æ•°æ®

## ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ

ä¼ ç»Ÿçš„åŸºé‡‘æ•°æ® API å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š
- âŒ æ–°æµªè´¢ç» API æœ‰åçˆ¬æœºåˆ¶ï¼ŒIP å®¹æ˜“è¢«å°
- âŒ å¤©å¤©åŸºé‡‘ç½‘ API æ’è¡Œæ¦œæ¥å£ä¸åŒ…å«æ–°å‘è¡Œçš„åŸºé‡‘
- âŒ akshare ç­‰åº“ä¹Ÿå­˜åœ¨éƒ¨åˆ†åŸºé‡‘æ‰¾ä¸åˆ°çš„æƒ…å†µ

**æœ¬é¡¹ç›®çš„è§£å†³æ–¹æ¡ˆï¼š**
- âœ… ä½¿ç”¨ Playwright æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è®¿é—®
- âœ… ä½¿ç”¨ç³»ç»Ÿ Microsoft Edge æµè§ˆå™¨ï¼Œæ— éœ€ä¸‹è½½é¢å¤–æµè§ˆå™¨
- âœ… é€šè¿‡ `fundcode_search.js` è·å–**çœŸæ­£çš„å…¨é‡åŸºé‡‘åˆ—è¡¨**
- âœ… å†…ç½®åæ£€æµ‹æœºåˆ¶ï¼Œé¿å…è¢«å°ç¦
- âœ… æ”¯æŒ MCP åè®®ï¼Œå¯è¢«å„ç§ AI åŠ©æ‰‹è°ƒç”¨

## åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | æè¿° | æ•°æ®é‡ |
|------|------|--------|
| `scrape_all_fund_codes` | è·å–å…¨é‡åŸºé‡‘ä»£ç åˆ—è¡¨ | 26000+ åª |
| `scrape_fund_list` | è·å–åŸºé‡‘æ’è¡Œæ¦œï¼ˆå«å‡€å€¼ï¼‰ | ~19000 åª |
| `scrape_fund_detail` | è·å–å•ä¸ªåŸºé‡‘è¯¦æƒ… | 12+ å­—æ®µ |
| `scrape_fund_nav_history` | è·å–å‡€å€¼å†å² | è‡ªå®šä¹‰æ—¶é—´èŒƒå›´ |
| `scrape_funds_batch` | æ‰¹é‡è·å–åŸºé‡‘è¯¦æƒ… | è‡ªå®šä¹‰æ•°é‡ |
| **`fetch_all_funds_info`** | **ä¸€é”®è·å–æ‰€æœ‰åŸºé‡‘å®Œæ•´ä¿¡æ¯ï¼ˆæ¨èï¼‰** | **26000+ åªï¼Œ12ä¸ªå­—æ®µ** |
| `check_browser_status` | æ£€æŸ¥æµè§ˆå™¨çŠ¶æ€ | - |

## å®‰è£…

### 1. å…‹éš†é¡¹ç›®
```bash
git clone git@github.com:Selene1225/Skills.git
cd Skills/fund_scraper_mcp
```

### 2. å®‰è£… Python ä¾èµ–
```bash
pip install -r requirements.txt
```

**æ³¨æ„ï¼š** æœ¬é¡¹ç›®ä½¿ç”¨ç³»ç»Ÿå·²å®‰è£…çš„ Microsoft Edge æµè§ˆå™¨ï¼Œ**æ— éœ€**è¿è¡Œ `playwright install`ã€‚å¦‚æœç³»ç»Ÿæœªå®‰è£… Edgeï¼Œè¯·å…ˆå®‰è£… [Microsoft Edge](https://www.microsoft.com/edge)ã€‚

## é…ç½®ä½¿ç”¨

### æ–¹å¼ä¸€ï¼šVS Code + GitHub Copilot

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.vscode/mcp.json`ï¼š

```json
{
  "mcpServers": {
    "fund-scraper": {
      "command": "python",
      "args": ["C:/path/to/fund_scraper_mcp/server.py"],
      "env": {
        "HEADLESS": "true"
      }
    }
  }
}
```

é‡å¯ VS Code åï¼ŒCopilot å°±èƒ½è°ƒç”¨è¿™äº›å·¥å…·äº†ã€‚

### æ–¹å¼äºŒï¼šClaude Desktop

ç¼–è¾‘ `claude_desktop_config.json`ï¼š

```json
{
  "mcpServers": {
    "fund-scraper": {
      "command": "python",
      "args": ["C:/path/to/fund_scraper_mcp/server.py"],
      "env": {
        "HEADLESS": "true"
      }
    }
  }
}
```

### æ–¹å¼ä¸‰ï¼šç›´æ¥æµ‹è¯•

```bash
cd fund_scraper_mcp
python test_scraper.py
```

## ä½¿ç”¨ç¤ºä¾‹

é…ç½®å¥½ MCP åï¼Œä½ å¯ä»¥åœ¨ AI åŠ©æ‰‹ä¸­è¿™æ ·ä½¿ç”¨ï¼š

### ä¸€é”®è·å–æ‰€æœ‰åŸºé‡‘æ•°æ®ï¼ˆæ¨èï¼‰
```
è¯·ç”¨ fetch_all_funds_info æ‹‰å–æ‰€æœ‰åŸºé‡‘æ•°æ®ï¼Œä¿å­˜ä¸º CSV æ–‡ä»¶
```

æˆ–è€…å…ˆæµ‹è¯•ï¼ˆåªè·å–å‰100ä¸ªï¼‰ï¼š
```
è¯·ç”¨ fetch_all_funds_info è·å–å‰100ä¸ªåŸºé‡‘çš„æ•°æ®ï¼Œå‚æ•°ï¼šmax_funds=100
```

### å…¶ä»–ç¤ºä¾‹
```
è¯·å¸®æˆ‘è·å–æ‰€æœ‰åŸºé‡‘çš„ä»£ç åˆ—è¡¨
```

```
è¯·è·å–åŸºé‡‘ 000001 çš„è¯¦ç»†ä¿¡æ¯
```

```
è¯·è·å–åŸºé‡‘ 110022 æœ€è¿‘30å¤©çš„å‡€å€¼å†å²
```

```
è¯·æ‰¹é‡è·å–è¿™äº›åŸºé‡‘çš„è¯¦æƒ…ï¼š000001, 110022, 161005
```

## è¿”å›æ•°æ®ç¤ºä¾‹

### ä¸€é”®è·å–æ‰€æœ‰åŸºé‡‘ä¿¡æ¯ï¼ˆfetch_all_funds_infoï¼‰
```json
{
  "success": true,
  "total_count": 26078,
  "data": [
    {
      "symbol": "000001",
      "sname": "åå¤æˆé•¿æ··åˆ",
      "per_nav": "1.1670",
      "total_nav": "3.7400",
      "yesterday_nav": 1.173,
      "nav_rate": "-0.51",
      "nav_a": -0.006,
      "sg_states": "å¼€æ”¾",
      "nav_date": "2026-01-30",
      "fund_manager": "åˆ˜ç¿èª éƒ‘æ™“è¾‰",
      "jjlx": "æ··åˆå‹-çµæ´»",
      "jjzfe": "29.37äº¿"
    }
  ]
}
```

**å­—æ®µè¯´æ˜ï¼ˆä¸æ–°æµªæ•°æ®æ ¼å¼å…¼å®¹ï¼‰ï¼š**
- `symbol`: åŸºé‡‘ä»£ç 
- `sname`: åŸºé‡‘åç§°
- `per_nav`: å•ä½å‡€å€¼
- `total_nav`: ç´¯è®¡å‡€å€¼
- `yesterday_nav`: å‰ä¸€æ—¥å‡€å€¼
- `nav_rate`: å¢é•¿ç‡
- `nav_a`: æ¶¨è·Œé¢
- `sg_states`: ç”³è´­çŠ¶æ€
- `nav_date`: å‡€å€¼æ—¥æœŸ
- `fund_manager`: åŸºé‡‘ç»ç†
- `jjlx`: åŸºé‡‘ç±»å‹
- `jjzfe`: åŸºé‡‘è§„æ¨¡

### å…¨é‡åŸºé‡‘ä»£ç 
```json
{
  "success": true,
  "total_count": 26078,
  "data": [
    {"symbol": "000001", "sname": "åå¤æˆé•¿æ··åˆ", "jjlx": "æ··åˆå‹-çµæ´»"},
    {"symbol": "000002", "sname": "åå¤æˆé•¿æ··åˆ(åç«¯)", "jjlx": "æ··åˆå‹-çµæ´»"}
  ]
}
```

### åŸºé‡‘è¯¦æƒ…
```json
{
  "success": true,
  "data": {
    "symbol": "000001",
    "sname": "åå¤æˆé•¿æ··åˆ",
    "per_nav": "1.1670",
    "total_nav": "3.7400",
    "yesterday_nav": 1.173,
    "nav_rate": "-0.51",
    "nav_a": -0.006,
    "nav_date": "2026-01-30",
    "fund_manager": "åˆ˜ç¿èª éƒ‘æ™“è¾‰",
    "jjlx": "æ··åˆå‹-çµæ´»",
    "fund_scale": "29.37äº¿",
    "sg_states": "å¼€æ”¾"
  }
}
```

### å‡€å€¼å†å²
```json
{
  "success": true,
  "data": [
    {"date": "2026-01-30", "nav": "1.1670", "total_nav": "3.7400", "rate": "-0.51"},
    {"date": "2026-01-29", "nav": "1.1730", "total_nav": "3.7460", "rate": "-2.41"}
  ]
}
```

## é¡¹ç›®ç»“æ„

```
fund_scraper_mcp/
â”œâ”€â”€ server.py              # MCP Server ä¸»å…¥å£
â”œâ”€â”€ browser_manager.py     # Chrome æµè§ˆå™¨ç®¡ç†
â”œâ”€â”€ scrapers/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_scraper.py    # çˆ¬è™«æŠ½è±¡åŸºç±»
â”‚   â””â”€â”€ eastmoney_scraper.py  # å¤©å¤©åŸºé‡‘çˆ¬è™«å®ç°
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ anti_detection.py  # åæ£€æµ‹ç­–ç•¥ï¼ˆUAè½®æ¢ã€å»¶è¿Ÿç­‰ï¼‰
â”œâ”€â”€ test_scraper.py        # åŠŸèƒ½æµ‹è¯•è„šæœ¬
â”œâ”€â”€ requirements.txt       # Python ä¾èµ–
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## ç¯å¢ƒå˜é‡

| å˜é‡å | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `HEADLESS` | æ˜¯å¦æ— å¤´æ¨¡å¼è¿è¡Œæµè§ˆå™¨ | `true` |

**è°ƒè¯•æ¨¡å¼ï¼š** å¦‚æœæƒ³çœ‹åˆ°æµè§ˆå™¨è¿è¡Œè¿‡ç¨‹ï¼Œè®¾ç½® `HEADLESS=false`ï¼š
```json
"env": {
  "HEADLESS": "false"
}
```

## è°å¯ä»¥ä½¿ç”¨ï¼Ÿ

**MCP æ˜¯å¼€æ”¾åè®®**ï¼Œè¿™ä¸ª Server å¯ä»¥è¢«ä»»ä½•æ”¯æŒ MCP çš„å®¢æˆ·ç«¯ä½¿ç”¨ï¼š

| å®¢æˆ·ç«¯ | æ”¯æŒçŠ¶æ€ |
|--------|---------|
| GitHub Copilot (VS Code) | âœ… æ”¯æŒ |
| Claude Desktop | âœ… æ”¯æŒ |
| Claude Code | âœ… æ”¯æŒ |
| Cursor | âœ… æ”¯æŒ |
| Continue | âœ… æ”¯æŒ |
| è‡ªå®šä¹‰ MCP Client | âœ… æ”¯æŒ |

## å‘å¸ƒä¸åˆ†äº«

å¦‚æœæƒ³åˆ†äº«ç»™å…¶ä»–äººä½¿ç”¨ï¼Œå¯ä»¥ï¼š

1. **GitHub**ï¼šç›´æ¥åˆ†äº«ä»“åº“é“¾æ¥ [https://github.com/Selene1225/Skills](https://github.com/Selene1225/Skills)
2. **PyPI**ï¼šæ‰“åŒ…å‘å¸ƒåˆ° PyPIï¼Œç”¨æˆ· `pip install fund-scraper-mcp` å®‰è£…
3. **npm**ï¼šç”¨ Node.js åŒ…è£…åå‘å¸ƒåˆ° npm

## æ³¨æ„äº‹é¡¹

1. âš ï¸ æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³ç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾
2. âš ï¸ è¯·å‹¿é«˜é¢‘è¯·æ±‚ï¼Œå»ºè®®æ‰¹é‡è·å–æ—¶æ·»åŠ é€‚å½“å»¶è¿Ÿ
3. âœ… ä½¿ç”¨ç³»ç»Ÿ Microsoft Edge æµè§ˆå™¨ï¼Œæ— éœ€å®‰è£…é¢å¤–æµè§ˆå™¨ï¼ˆçº¦èŠ‚çœ 200MB ç©ºé—´ï¼‰
4. ğŸ’¡ Windows ç³»ç»Ÿé€šå¸¸å·²é¢„è£… Edgeï¼ŒmacOS/Linux ç”¨æˆ·éœ€è¦å…ˆå®‰è£… Edge

## License

MIT

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request åˆ° [https://github.com/Selene1225/Skills](https://github.com/Selene1225/Skills)ï¼

æœ¬ Skill æ˜¯ Skills ä»“åº“çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…å«å¤šä¸ª MCP Server å®ç°ã€‚
